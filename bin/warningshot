#! /usr/bin/env ruby
require 'warningshot/suite'

# Create a config hash
config = WarningShot::Config.parse_args

# Initialize and run a new dependency resolver
dep_resolver = WarningShot.fire!(config)

# Get the stats from the resolver
stats = dep_resolver.stats

# Growl the results if growl is on
WarningShot::Growl.say stats.to_a.join('/') if config[:growl]

#Return an exit status based on number of unresolved dependencies
exit(stats[:unresolved])